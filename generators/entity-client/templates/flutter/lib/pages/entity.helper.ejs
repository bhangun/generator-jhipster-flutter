import 'dart:async';
import 'dart:convert';
import '<%= entityClass.toLowerCase() %>.dart';
import '../../services/connection.dart';


// GET getAll<%= entityClass %>s
// POST create<%= entityClass %>
// PUT update<%= entityClass %>
const API_<%= entityClass.toUpperCase() %>S = "<%= entityClass.toLowerCase() %>s";

// GET get<%= entityClass %>
// DELETE delete<%= entityClass %>
const API_<%= entityClass.toUpperCase() %> = "<%= entityClass.toLowerCase() %>s/";

//
Future<<%= entityClass %>> <%= entityClass.toLowerCase() %>(String id) async {
  var response = await restGet(API_<%= entityClass.toUpperCase() %> + id,true,false);
  return <%= entityClass %>.fromJson(json.decode(response));
}


//
Future<String> <%= entityClass.toLowerCase() %>s() async {
  print("get <%= entityClass.toLowerCase() %>s");
  return await restGet(API_<%= entityClass.toUpperCase() %>,true,false);
}

//
create<%= entityClass %>(<%= entityClass %> <%= entityClass.toLowerCase() %>) async {
  print("create");
  return await restPost(API_<%= entityClass.toUpperCase() %>, <%= entityClass.toLowerCase() %>.toJson().toString(),true);
}

//
update<%= entityClass %>(<%= entityClass %> <%= entityClass.toLowerCase() %>) async {
  print("update");
  return await restPut(API_<%= entityClass.toUpperCase() %>, <%= entityClass.toLowerCase() %>.toJson().toString(),true);
}


//
delete<%= entityClass %>(<%= entityClass %> <%= entityClass.toLowerCase() %>) async {
  return await restDelete(API_<%= entityClass.toUpperCase() %> + <%= entityClass.toLowerCase() %>.toJson().toString());
}


List<<%= entityClass %>> <%= entityClass.toLowerCase() %>sData(String data) {
  final parsed =json.decode(data).cast<Map<String, dynamic>>();
  List<<%= entityClass %>> lu= parsed.map<<%= entityClass %>>((json) => <%= entityClass %>.fromJson(json)).toList();
  return lu;
}

